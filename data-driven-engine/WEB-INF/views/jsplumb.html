<!--  
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
-->
<!DOCTYPE html>

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>data driven engine</title>

<!--  script src="http://code.jquery.com/jquery-1.11.2.min.js"></script -->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
<!--  
<script src="http://jsplumbtoolkit.com/js/dom.jsPlumb-1.7.5-min.js"></script>
-->
<script src="http://cdnjs.cloudflare.com/ajax/libs/jsPlumb/1.4.1/jquery.jsPlumb-1.4.1-all-min.js"></script>

<style>
html, body, .container {
	height: 100%;
	width: 100%
}

.component-menu-container {
	width: 100%;
	height: 30%;
	background-color: rgb(194, 194, 194);
}

.component-container {
	width: 100%;
	height: 70%;
	background-color: rgb(230, 230, 230);
}

.component-menu {
	width : 10%;
	height : 5%;
	margin : 0px;
	background-color : rgb(184, 222, 209);
	color : black;
	border-radius : 0.75em;
	padding : 4%;
	float : left;
	position : absolute;
}

.component {
	width : 10%;
	height : 5%;
	margin : 0px;
	background-color : rgb(157, 210, 193);
	color : black;
	border-radius : 0.75em;
	padding : 4%;
	float : left;
	position : absolute;
}
</style>

</head>
<body>

<div class="container">
	<div class="component-menu-container">
		<br />
		<div id="addComponentDiv" class="component-menu">add component</div>
	</div>
	<div id="componentContainerDiv" class="component-container">
		<br />
	</div>
</div>


<script type="text/javascript">
var controller;
var view;
var data;
var util;

var firstInstance;

function Controller() {
}; //Controller
controller = new Controller();

function View() {
	this.componentContainerDiv = $("#componentContainerDiv");
	
	this.jsPlumbInstance;
	
	this.addComponent = function(x, y){
		var componentDOM = $('<div class="component">component</div>');
		componentDOM.css({ left : x, top : y });
		view.jsPlumbInstance.draggable(componentDOM, { grid : [20, 20] });
		view.componentContainerDiv.append(componentDOM);
	} //addComponent
	
	this.initComponentMenu = function(){
		view.jsPlumbInstance.draggable($(".component-menu"), { 
			grid : [20, 20],
			drag : function(event, ui){ },
			stop : function(event, ui){
				view.addComponent(ui.offset.left, ui.offset.top);
			}, 
			revert : function(){ return true }
		});
	} //initComponentMenu
	
	this.setDraggable = function(target){
		view.jsPlumbInstance.draggable(target, { grid : [20, 20] });
	} //setDraggable
}; //UI
view = new View();

function Data() {
}; //Data
data = new Data();

function Util() {
	this.rgb = function(r, g, b){
		return '#' + componentToHex(r) + componentToHex(g) + componentToHex(b);
	} //rgb
}; //Util
util = new Util;


jsPlumb.ready(function() {
	view.jsPlumbInstance = jsPlumb.getInstance({
		ConnectionOverlays: [
			[ "Arrow", { location: 1 } ],
			[ "Label", {
				location: 0.1,
				id: "label",
				cssClass: "aLabel"
			}]
		]
	});
	view.initComponentMenu();
});
</script>
</body>
</html>